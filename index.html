<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BookBazaar | Old Books Marketplace</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics-compat.js"></script>
    
    <style>
        /* ====== BASE STYLES ====== */
        :root {
            --primary: #4F46E5;
            --primary-dark: #4338CA;
            --primary-light: #6366F1;
            --secondary: #10B981;
            --secondary-dark: #0D9C6B;
            --danger: #EF4444;
            --warning: #F59E0B;
            --success: #10B981;
            --dark: #111827;
            --dark-light: #1F2937;
            --gray-900: #111827;
            --gray-800: #1F2937;
            --gray-700: #374151;
            --gray-600: #4B5563;
            --gray-500: #6B7280;
            --gray-400: #9CA3AF;
            --gray-300: #D1D5DB;
            --gray-200: #E5E7EB;
            --gray-100: #F3F4F6;
            --gray-50: #F9FAFB;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --radius-sm: 0.375rem;
            --radius: 0.5rem;
            --radius-md: 0.75rem;
            --radius-lg: 1rem;
            --radius-xl: 1.5rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--gray-50);
            color: var(--gray-900);
            line-height: 1.6;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* ====== AUTH MODAL ====== */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(8px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            animation: fadeIn 0.4s ease-out;
            padding: 1rem;
        }

        .auth-modal.hidden {
            display: none;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .auth-card {
            background: white;
            border-radius: var(--radius-xl);
            width: 100%;
            max-width: 450px;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
            animation: slideUp 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .auth-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 2.5rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .auth-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, rgba(255,255,255,0.1) 0%, transparent 70%);
        }

        .auth-logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            position: relative;
            z-index: 2;
        }

        .auth-logo-icon {
            width: 52px;
            height: 52px;
            background: rgba(255, 255, 255, 0.25);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .auth-logo-text h1 {
            font-size: 2rem;
            margin-bottom: 0.25rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .auth-logo-text p {
            font-size: 0.9rem;
            opacity: 0.9;
            font-weight: 300;
        }

        .auth-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.15);
            border-radius: var(--radius-lg);
            padding: 0.25rem;
            margin: 1.5rem auto 0;
            max-width: 320px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 2;
        }

        .auth-tab {
            flex: 1;
            padding: 0.85rem;
            text-align: center;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.8);
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .auth-tab:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .auth-tab.active {
            background: white;
            color: var(--primary);
            box-shadow: var(--shadow-md);
        }

        .auth-body {
            padding: 2.5rem 2rem;
            max-height: 70vh;
            overflow-y: auto;
        }

        .auth-body::-webkit-scrollbar {
            width: 6px;
        }

        .auth-body::-webkit-scrollbar-track {
            background: var(--gray-100);
            border-radius: 10px;
        }

        .auth-body::-webkit-scrollbar-thumb {
            background: var(--gray-300);
            border-radius: 10px;
        }

        .auth-body::-webkit-scrollbar-thumb:hover {
            background: var(--gray-400);
        }

        .auth-form {
            display: none;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.4s ease;
        }

        .auth-form.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
            animation: formAppear 0.5s ease;
        }

        @keyframes formAppear {
            from {
                opacity: 0;
                transform: translateY(15px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .form-group {
            margin-bottom: 1.5rem;
            position: relative;
        }

        .form-label {
            display: block;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .form-label::after {
            content: '*';
            color: var(--danger);
            font-size: 1.2rem;
            display: none;
        }

        .form-label.required::after {
            display: inline;
        }

        .form-control {
            width: 100%;
            padding: 1rem 1.25rem;
            background: white;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius);
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            color: var(--gray-900);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.15);
        }

        .password-input {
            position: relative;
        }

        .password-toggle {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--gray-500);
            cursor: pointer;
            font-size: 1.1rem;
            padding: 0.25rem;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .password-toggle:hover {
            background: var(--gray-100);
            color: var(--gray-700);
        }

        .form-check {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            margin-top: 1rem;
            padding: 0.75rem;
            background: var(--gray-50);
            border-radius: var(--radius);
            border: 1px solid var(--gray-200);
        }

        .form-check-input {
            width: 1.25rem;
            height: 1.25rem;
            border: 2px solid var(--gray-300);
            border-radius: 0.375rem;
            cursor: pointer;
            flex-shrink: 0;
            margin-top: 0.125rem;
            transition: all 0.2s ease;
            accent-color: var(--primary);
        }

        .form-check-input:checked {
            background-color: var(--primary);
            border-color: var(--primary);
        }

        .form-check-label {
            font-size: 0.875rem;
            color: var(--gray-700);
            line-height: 1.5;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 0.75rem 1.5rem;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 0.875rem;
            border-radius: var(--radius);
            border: none;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            white-space: nowrap;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            box-shadow: 0 4px 6px rgba(79, 70, 229, 0.25);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(79, 70, 229, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--secondary), var(--secondary-dark));
            color: white;
            box-shadow: 0 4px 6px rgba(16, 185, 129, 0.25);
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(16, 185, 129, 0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #DC2626);
            color: white;
            box-shadow: 0 4px 6px rgba(239, 68, 68, 0.25);
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(239, 68, 68, 0.3);
        }

        .btn-outline {
            background: transparent;
            color: var(--gray-700);
            border: 2px solid var(--gray-300);
        }

        .btn-outline:hover {
            background: var(--gray-50);
            border-color: var(--gray-400);
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
        }

        .btn-block {
            width: 100%;
            padding: 1.125rem;
        }

        .auth-footer {
            text-align: center;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--gray-200);
            font-size: 0.9rem;
            color: var(--gray-600);
        }

        .auth-link {
            color: var(--primary);
            font-weight: 600;
            text-decoration: none;
            cursor: pointer;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-sm);
            transition: all 0.2s ease;
        }

        .auth-link:hover {
            background: rgba(79, 70, 229, 0.1);
        }

        .form-control.error {
            border-color: var(--danger);
            background: rgba(239, 68, 68, 0.05);
        }

        .form-control.success {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.05);
        }

        .form-message {
            font-size: 0.8rem;
            margin-top: 0.25rem;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-sm);
            display: none;
        }

        .form-message.error {
            color: var(--danger);
            background: rgba(239, 68, 68, 0.1);
            display: block;
        }

        .btn.loading {
            position: relative;
            color: transparent !important;
            pointer-events: none;
        }

        .btn.loading::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 640px) {
            .auth-modal {
                padding: 0.5rem;
                align-items: flex-start;
                padding-top: 2rem;
            }
            
            .auth-card {
                max-width: 100%;
                border-radius: var(--radius-lg);
            }
            
            .auth-header {
                padding: 2rem 1.5rem;
            }
            
            .auth-body {
                padding: 2rem 1.5rem;
                max-height: calc(100vh - 200px);
            }
            
            .auth-logo {
                flex-direction: column;
                text-align: center;
                gap: 0.75rem;
            }
            
            .auth-logo-icon {
                width: 48px;
                height: 48px;
                font-size: 1.5rem;
            }
            
            .auth-logo-text h1 {
                font-size: 1.75rem;
            }
            
            .auth-tabs {
                max-width: 280px;
            }
            
            .auth-tab {
                padding: 0.75rem;
                font-size: 0.95rem;
            }
            
            .form-control {
                padding: 0.875rem 1rem;
            }
            
            .btn-block {
                padding: 1rem;
            }
        }

        /* ====== MAIN WEBSITE ====== */
        .main-website {
            display: none;
            min-height: 100vh;
        }

        .main-website.show {
            display: block;
        }

        /* ====== HEADER ====== */
        .main-header {
            background: white;
            border-bottom: 1px solid var(--gray-200);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-sm);
        }

        .header-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 0;
            flex-wrap: wrap;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
            flex-shrink: 0;
        }

        .brand-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .brand-text h1 {
            font-size: 1.25rem;
            color: var(--gray-900);
            line-height: 1.2;
            white-space: nowrap;
        }

        .brand-text span {
            font-size: 0.7rem;
            color: var(--gray-600);
            display: block;
            white-space: nowrap;
        }

        /* Navigation Styles */
        .nav-container {
            display: flex;
            align-items: center;
            flex: 1;
            justify-content: space-between;
            margin-left: 1.5rem;
            min-width: 0;
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 1.25rem;
            overflow-x: auto;
            padding: 0.25rem 0;
            scrollbar-width: none;
            -ms-overflow-style: none;
            flex: 1;
            min-width: 0;
        }

        .nav-menu::-webkit-scrollbar {
            display: none;
        }

        .nav-link {
            color: var(--gray-700);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.85rem;
            transition: color 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.4rem;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .nav-link:hover {
            color: var(--primary);
        }

        .nav-link.active {
            color: var(--primary);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-left: auto;
            flex-shrink: 0;
        }

        .search-container {
            position: relative;
            min-width: 200px;
            max-width: 250px;
        }

        .search-input {
            width: 100%;
            padding: 0.6rem 0.8rem 0.6rem 2.2rem;
            background: var(--gray-100);
            border: 1.5px solid var(--gray-200);
            border-radius: var(--radius);
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 0.8rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray-500);
            font-size: 0.85rem;
        }

        .btn-sell {
            background: linear-gradient(135deg, var(--secondary), var(--secondary-dark));
            color: white;
            padding: 0.6rem 1rem;
            font-size: 0.8rem;
            white-space: nowrap;
        }

        .btn-sell:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.4rem;
            border-radius: var(--radius);
            cursor: pointer;
            transition: background 0.3s ease;
            flex-shrink: 0;
        }

        .user-menu:hover {
            background: var(--gray-100);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.75rem;
            flex-shrink: 0;
        }

        .user-info {
            display: flex;
            flex-direction: column;
            gap: 0.125rem;
            overflow: hidden;
        }

        .user-name {
            font-weight: 500;
            font-size: 0.75rem;
            color: var(--gray-900);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100px;
        }

        .user-email {
            font-size: 0.65rem;
            color: var(--gray-500);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100px;
        }

        /* Mobile menu toggle */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.25rem;
            color: var(--gray-700);
            cursor: pointer;
            padding: 0.5rem;
        }

        /* ====== HERO SECTION ====== */
        .hero-section {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 5rem 0;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.05' fill-rule='evenodd'/%3E%3C/svg%3E");
            opacity: 0.3;
        }

        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .hero-title {
            font-size: 2.75rem;
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 1rem;
        }

        .hero-subtitle {
            font-size: 1.125rem;
            opacity: 0.9;
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-search {
            background: white;
            border-radius: var(--radius-xl);
            padding: 0.5rem;
            max-width: 600px;
            margin: 0 auto;
            display: flex;
            box-shadow: var(--shadow-xl);
        }

        .hero-search input {
            flex: 1;
            padding: 1rem 1.5rem;
            border: none;
            background: transparent;
            font-size: 1rem;
            color: var(--gray-900);
        }

        .hero-search input:focus {
            outline: none;
        }

        .hero-search button {
            background: linear-gradient(135deg, var(--secondary), var(--secondary-dark));
            color: white;
            border: none;
            padding: 0 2rem;
            border-radius: var(--radius-lg);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .hero-search button:hover {
            transform: translateY(-1px);
        }

        .hero-tags {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-top: 2rem;
        }

        .hero-tag {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.875rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* ====== STATS SECTION ====== */
        .stats-section {
            padding: 4rem 0;
            background: white;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .stat-card {
            text-align: center;
            padding: 1.5rem;
            background: var(--gray-50);
            border-radius: var(--radius-lg);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--primary-light), var(--primary));
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            color: white;
            font-size: 1.25rem;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--gray-900);
            margin-bottom: 0.5rem;
        }

        .stat-text {
            color: var(--gray-600);
            font-size: 0.9rem;
        }

        /* ====== CATEGORIES SECTION ====== */
        .section {
            padding: 4rem 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title h2 {
            font-size: 2rem;
            color: var(--gray-900);
            margin-bottom: 0.75rem;
        }

        .section-title p {
            color: var(--gray-600);
            max-width: 600px;
            margin: 0 auto;
            font-size: 0.95rem;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .category-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 1.75rem;
            text-align: center;
            border: 1px solid var(--gray-200);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .category-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: var(--shadow-lg);
        }

        .category-icon {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--primary-light), var(--primary));
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.25rem;
            color: white;
            font-size: 1.25rem;
        }

        .category-card h3 {
            font-size: 1.125rem;
            margin-bottom: 0.5rem;
            color: var(--gray-900);
        }

        .category-card p {
            color: var(--gray-600);
            font-size: 0.85rem;
        }

        /* ====== BOOKS GRID ====== */
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .book-card {
            background: white;
            border-radius: var(--radius-lg);
            overflow: hidden;
            border: 1px solid var(--gray-200);
            transition: all 0.3s ease;
            position: relative;
        }

        .book-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: var(--shadow-lg);
        }

        .book-badge {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: linear-gradient(135deg, var(--secondary), var(--secondary-dark));
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.7rem;
            font-weight: 500;
            z-index: 1;
        }

        .book-badge.sold {
            background: linear-gradient(135deg, var(--danger), #DC2626);
        }

        .book-image {
            height: 180px;
            background: linear-gradient(135deg, var(--gray-100), var(--gray-200));
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .book-image i {
            font-size: 3rem;
            color: var(--gray-400);
        }

        .book-content {
            padding: 1.25rem;
        }

        .book-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 0.5rem;
            line-height: 1.4;
        }

        .book-author {
            color: var(--gray-600);
            font-size: 0.8rem;
            margin-bottom: 0.75rem;
        }

        .book-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
            font-size: 0.8rem;
        }

        .book-location {
            color: var(--gray-600);
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .book-condition {
            background: var(--gray-100);
            padding: 0.2rem 0.6rem;
            border-radius: 50px;
            color: var(--gray-700);
            font-weight: 500;
            font-size: 0.75rem;
        }

        .book-price {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .current-price {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--gray-900);
        }

        .original-price {
            color: var(--gray-500);
            text-decoration: line-through;
            font-size: 0.8rem;
        }

        .discount {
            background: linear-gradient(135deg, var(--secondary), var(--secondary-dark));
            color: white;
            padding: 0.2rem 0.4rem;
            border-radius: var(--radius-sm);
            font-size: 0.7rem;
            font-weight: 500;
        }

        .book-seller {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding-top: 0.75rem;
            border-top: 1px solid var(--gray-200);
        }

        .seller-avatar {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.75rem;
        }

        .seller-info h4 {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 0.125rem;
        }

        .seller-info p {
            font-size: 0.7rem;
            color: var(--gray-500);
        }

        .book-actions {
            margin-top: 0.75rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .btn-contact {
            width: 100%;
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.6rem;
            border-radius: var(--radius);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.85rem;
        }

        .btn-contact:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
        }

        .btn-sold {
            background: var(--success);
            color: white;
            border: none;
            padding: 0.5rem;
            border-radius: var(--radius);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.8rem;
        }

        .btn-sold:hover {
            background: var(--secondary-dark);
        }

        .btn-delete {
            background: var(--danger);
            color: white;
            border: none;
            padding: 0.5rem;
            border-radius: var(--radius);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.8rem;
        }

        .btn-delete:hover {
            background: #DC2626;
        }

        /* ====== MY BOOKS SECTION ====== */
        .mybooks-section {
            padding: 4rem 0;
            background: var(--gray-50);
        }

        .mybooks-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .books-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
        }

        .books-tab {
            padding: 0.6rem 1.25rem;
            background: white;
            border: 1px solid var(--gray-200);
            border-radius: var(--radius);
            font-weight: 500;
            color: var(--gray-700);
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
            font-size: 0.85rem;
        }

        .books-tab:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .books-tab.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .no-books-message {
            text-align: center;
            padding: 3rem 2rem;
            background: white;
            border-radius: var(--radius-lg);
            border: 2px dashed var(--gray-300);
        }

        .no-books-message i {
            font-size: 2.5rem;
            color: var(--gray-400);
            margin-bottom: 1rem;
        }

        .no-books-message h3 {
            font-size: 1.25rem;
            color: var(--gray-700);
            margin-bottom: 0.5rem;
        }

        .no-books-message p {
            color: var(--gray-600);
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }

        /* ====== HOW IT WORKS ====== */
        .steps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1.5rem;
        }

        .step-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: 1.75rem;
            text-align: center;
            border: 1px solid var(--gray-200);
            position: relative;
            transition: all 0.3s ease;
        }

        .step-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: var(--shadow-lg);
        }

        .step-number {
            position: absolute;
            top: -0.75rem;
            left: -0.75rem;
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1rem;
        }

        .step-icon {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, var(--primary-light), var(--primary));
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.25rem;
            color: white;
            font-size: 1.25rem;
        }

        .step-card h3 {
            font-size: 1.125rem;
            margin-bottom: 0.75rem;
            color: var(--gray-900);
        }

        .step-card p {
            color: var(--gray-600);
            font-size: 0.9rem;
        }

        /* ====== FOOTER ====== */
        .main-footer {
            background: var(--gray-900);
            color: white;
            padding: 3rem 0 2rem;
            margin-top: 4rem;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-col h3 {
            font-size: 1rem;
            margin-bottom: 1.25rem;
            color: white;
        }

        .footer-col ul {
            list-style: none;
        }

        .footer-col ul li {
            margin-bottom: 0.6rem;
        }

        .footer-col ul li a {
            color: var(--gray-400);
            text-decoration: none;
            transition: color 0.3s ease;
            font-size: 0.8rem;
        }

        .footer-col ul li a:hover {
            color: white;
        }

        .social-links {
            display: flex;
            gap: 0.75rem;
            margin-top: 1.25rem;
        }

        .social-link {
            width: 32px;
            height: 32px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 0.85rem;
        }

        .social-link:hover {
            background: var(--primary);
            transform: translateY(-2px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--gray-400);
            font-size: 0.8rem;
        }

        /* ====== MODALS ====== */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(4px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: var(--radius-xl);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
            animation: slideUp 0.4s ease;
        }

        .modal-header {
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            font-size: 1.25rem;
            color: var(--gray-900);
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.25rem;
            color: var(--gray-500);
            cursor: pointer;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            background: var(--gray-100);
            color: var(--gray-700);
        }

        .modal-body {
            padding: 1.5rem;
        }

        /* ====== RESPONSIVE ====== */
        @media (max-width: 1024px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .search-container {
                min-width: 180px;
                max-width: 200px;
            }
        }

        @media (max-width: 768px) {
            .header-container {
                padding: 0.5rem 0;
            }
            
            .brand {
                order: 1;
            }
            
            .menu-toggle {
                display: block;
                order: 2;
                margin-left: auto;
            }
            
            .nav-container {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: white;
                border-bottom: 1px solid var(--gray-200);
                box-shadow: var(--shadow-md);
                padding: 1rem;
                margin-left: 0;
                flex-direction: column;
                align-items: stretch;
            }
            
            .nav-container.show {
                display: flex;
            }
            
            .nav-menu {
                flex-direction: column;
                align-items: stretch;
                gap: 0.5rem;
                margin-bottom: 1rem;
                overflow-x: visible;
            }
            
            .nav-link {
                padding: 0.75rem;
                border-radius: var(--radius);
                font-size: 0.9rem;
            }
            
            .nav-link:hover {
                background: var(--gray-100);
            }
            
            .header-actions {
                margin-left: 0;
                width: 100%;
                flex-direction: column;
                gap: 0.75rem;
            }
            
            .search-container {
                width: 100%;
                max-width: 100%;
                min-width: unset;
            }
            
            .user-menu {
                width: 100%;
                justify-content: space-between;
                padding: 0.75rem;
            }
            
            .hero-title {
                font-size: 2rem;
            }
            
            .hero-subtitle {
                font-size: 1rem;
            }
            
            .hero-search {
                flex-direction: column;
                gap: 0.5rem;
                padding: 1rem;
            }
            
            .hero-search input {
                padding: 0.875rem 1rem;
            }
            
            .hero-search button {
                padding: 0.875rem;
            }
            
            .section {
                padding: 3rem 0;
            }
        }

        @media (max-width: 640px) {
            .hero-title {
                font-size: 1.75rem;
            }
            
            .section-title h2 {
                font-size: 1.5rem;
            }
            
            .books-grid {
                grid-template-columns: 1fr;
            }
            
            .categories-grid {
                grid-template-columns: 1fr;
            }
            
            .steps-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .mybooks-header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .mybooks-header .btn {
                width: 100%;
            }
        }

        /* ====== UTILITIES ====== */
        .text-center {
            text-align: center;
        }

        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 1rem; }
        .mb-4 { margin-bottom: 1.5rem; }
        .mb-5 { margin-bottom: 2rem; }
        .mb-6 { margin-bottom: 3rem; }

        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-3 { margin-top: 1rem; }
        .mt-4 { margin-top: 1.5rem; }
        .mt-5 { margin-top: 2rem; }
        .mt-6 { margin-top: 3rem; }

        .py-4 { padding-top: 1.5rem; padding-bottom: 1.5rem; }
        .py-6 { padding-top: 2rem; padding-bottom: 2rem; }
        .py-8 { padding-top: 3rem; padding-bottom: 3rem; }

        .bg-white { background: white; }
        .bg-gray-50 { background: var(--gray-50); }
        .bg-gray-100 { background: var(--gray-100); }
    </style>
</head>
<body>
    <!-- Auth Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-card">
            <div class="auth-header">
                <div class="auth-logo">
                    <div class="auth-logo-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="auth-logo-text">
                        <h1>BookBazaar</h1>
                        <p>India's Trusted Books Marketplace</p>
                    </div>
                </div>
                
                <div class="auth-tabs">
                    <button class="auth-tab active" data-tab="login">Login</button>
                    <button class="auth-tab" data-tab="signup">Sign Up</button>
                </div>
            </div>
            
            <div class="auth-body">
                <!-- Login Form -->
                <form id="loginForm" class="auth-form active">
                    <div class="form-group">
                        <label for="loginEmail" class="form-label required">Email Address</label>
                        <input type="email" id="loginEmail" class="form-control" placeholder="you@example.com" required>
                        <div class="form-message" id="loginEmailError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="loginPassword" class="form-label required">Password</label>
                        <div class="password-input">
                            <input type="password" id="loginPassword" class="form-control" placeholder="Enter your password" required>
                            <button type="button" class="password-toggle" data-target="loginPassword">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="form-message" id="loginPasswordError"></div>
                    </div>
                    
                    <div class="form-check">
                        <input type="checkbox" id="rememberMe" class="form-check-input">
                        <label for="rememberMe" class="form-check-label">Remember me</label>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-block mt-4" id="loginBtn">
                        <i class="fas fa-sign-in-alt"></i> Sign In
                    </button>
                    
                    <div class="auth-footer">
                        <p>Don't have an account? <a class="auth-link" data-switch="signup">Sign up</a></p>
                        <p style="margin-top: 0.5rem;">
                            <a href="#" class="auth-link" id="forgotPasswordLink">Forgot Password?</a>
                        </p>
                    </div>
                </form>
                
                <!-- Signup Form -->
                <form id="signupForm" class="auth-form">
                    <div class="form-group">
                        <label for="signupName" class="form-label required">Full Name</label>
                        <input type="text" id="signupName" class="form-control" placeholder="John Doe" required>
                        <div class="form-message" id="signupNameError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="signupEmail" class="form-label required">Email Address</label>
                        <input type="email" id="signupEmail" class="form-control" placeholder="you@example.com" required>
                        <div class="form-message" id="signupEmailError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="signupPhone" class="form-label required">Phone Number</label>
                        <input type="tel" id="signupPhone" class="form-control" placeholder="9876543210" pattern="[0-9]{10}" required>
                        <div class="form-message" id="signupPhoneError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="signupCity" class="form-label required">City</label>
                        <select id="signupCity" class="form-control" required>
                            <option value="">Select your city</option>
                            <option value="Delhi">Delhi</option>
                            <option value="Mumbai">Mumbai</option>
                            <option value="Bangalore">Bangalore</option>
                            <option value="Hyderabad">Hyderabad</option>
                            <option value="Chennai">Chennai</option>
                            <option value="Kolkata">Kolkata</option>
                            <option value="Pune">Pune</option>
                            <option value="Ahmedabad">Ahmedabad</option>
                            <option value="Jaipur">Jaipur</option>
                            <option value="Lucknow">Lucknow</option>
                        </select>
                        <div class="form-message" id="signupCityError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="signupPassword" class="form-label required">Password</label>
                        <div class="password-input">
                            <input type="password" id="signupPassword" class="form-control" placeholder="Create a strong password" required minlength="6">
                            <button type="button" class="password-toggle" data-target="signupPassword">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="form-message" id="signupPasswordError"></div>
                        <small style="display: block; margin-top: 0.25rem; color: var(--gray-500); font-size: 0.8rem;">
                            Must be at least 6 characters
                        </small>
                    </div>
                    
                    <div class="form-group">
                        <label for="confirmPassword" class="form-label required">Confirm Password</label>
                        <div class="password-input">
                            <input type="password" id="confirmPassword" class="form-control" placeholder="Re-enter your password" required>
                            <button type="button" class="password-toggle" data-target="confirmPassword">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="form-message" id="confirmPasswordError"></div>
                    </div>
                    
                    <div class="form-check">
                        <input type="checkbox" id="agreeTerms" class="form-check-input" required>
                        <label for="agreeTerms" class="form-check-label">
                            I agree to the <a href="#" class="auth-link">Terms & Conditions</a> and <a href="#" class="auth-link">Privacy Policy</a>
                        </label>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-block mt-4" id="signupBtn">
                        <i class="fas fa-user-plus"></i> Create Account
                    </button>
                    
                    <div class="auth-footer">
                        <p>Already have an account? <a class="auth-link" data-switch="login">Sign in</a></p>
                    </div>
                </form>
                
                <!-- Forgot Password Form -->
                <form id="forgotPasswordForm" class="auth-form">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <div class="category-icon" style="width: 64px; height: 64px; margin: 0 auto 1rem; background: linear-gradient(135deg, var(--primary-light), var(--primary));">
                            <i class="fas fa-key"></i>
                        </div>
                        <h3 style="margin-bottom: 0.5rem;">Reset Password</h3>
                        <p style="color: var(--gray-600);">Enter your email to receive a password reset link</p>
                    </div>
                    
                    <div class="form-group">
                        <label for="forgotEmail" class="form-label required">Email Address</label>
                        <input type="email" id="forgotEmail" class="form-control" placeholder="you@example.com" required>
                        <div class="form-message" id="forgotEmailError"></div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-block mt-4" id="resetPasswordBtn">
                        <i class="fas fa-paper-plane"></i> Send Reset Link
                    </button>
                    
                    <div class="auth-footer">
                        <p>Remember your password? <a class="auth-link" data-switch="login">Back to Login</a></p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Main Website -->
    <div class="main-website" id="mainWebsite">
        <!-- Header -->
        <header class="main-header">
            <div class="container header-container">
                <a href="#" class="brand">
                    <div class="brand-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="brand-text">
                        <h1>BookBazaar</h1>
                        <span>Buy & Sell Old Books</span>
                    </div>
                </a>
                
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                
                <div class="nav-container" id="navContainer">
                    <nav class="nav-menu">
                        <a href="#home" class="nav-link active">
                            <i class="fas fa-home"></i> Home
                        </a>
                        <a href="#books" class="nav-link">
                            <i class="fas fa-book"></i> Browse
                        </a>
                        <a href="#mybooks" class="nav-link">
                            <i class="fas fa-bookmark"></i> My Books
                        </a>
                        <a href="#categories" class="nav-link">
                            <i class="fas fa-th-large"></i> Categories
                        </a>
                        <a href="#how" class="nav-link">
                            <i class="fas fa-question-circle"></i> How it Works
                        </a>
                    </nav>
                    
                    <div class="header-actions">
                        <div class="search-container">
                            <i class="fas fa-search search-icon"></i>
                            <input type="text" class="search-input" placeholder="Search books...">
                        </div>
                        
                        <button class="btn btn-sell" id="sellNowBtn">
                            <i class="fas fa-plus"></i> Sell Book
                        </button>
                        
                        <div class="user-menu" id="userMenu">
                            <div class="user-avatar" id="userAvatar">U</div>
                            <div class="user-info">
                                <div class="user-name" id="userName">User</div>
                                <div class="user-email" id="userEmail">user@example.com</div>
                            </div>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Hero Section -->
        <section class="hero-section" id="home">
            <div class="container">
                <div class="hero-content">
                    <h1 class="hero-title">Buy & Sell Old Books in Your City</h1>
                    <p class="hero-subtitle">Discover thousands of second-hand books from local sellers. Novels, textbooks, competitive books - all at 50-80% off retail price!</p>
                    
                    <div class="hero-search">
                        <input type="text" placeholder="Search for books (e.g., 'Harry Potter', 'NCERT', 'UPSC')">
                        <button type="button">
                            <i class="fas fa-search"></i> Search
                        </button>
                    </div>
                    
                    <div class="hero-tags">
                        <span class="hero-tag"> Novels & Fiction</span>
                        <span class="hero-tag"> Academic Textbooks</span>
                        <span class="hero-tag"> Competitive Exams</span>
                        <span class="hero-tag"> Children Books</span>
                        <span class="hero-tag"> Business & Finance</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Stats Section -->
        <section class="stats-section">
            <div class="container">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="stat-number" id="totalBooks">10,000+</div>
                        <div class="stat-text">Books Listed</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-number" id="activeUsers">5,000+</div>
                        <div class="stat-text">Active Users</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div class="stat-number" id="cities">100+</div>
                        <div class="stat-text">Cities</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-handshake"></i>
                        </div>
                        <div class="stat-number" id="successRate">98%</div>
                        <div class="stat-text">Success Rate</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- My Books Section -->
        <section class="section mybooks-section" id="mybooks">
            <div class="container">
                <div class="mybooks-header">
                    <div class="section-title" style="margin-bottom: 0; text-align: left;">
                        <h2>My Books</h2>
                        <p>Manage your listings, mark books as sold, or delete them</p>
                    </div>
                    <button class="btn btn-primary" id="addNewBookBtn">
                        <i class="fas fa-plus"></i> Add New Book
                    </button>
                </div>
                
                <div class="books-tabs" id="myBooksTabs">
                    <button class="books-tab active" data-tab="active">Active Listings</button>
                    <button class="books-tab" data-tab="sold">Sold Books</button>
                    <button class="books-tab" data-tab="all">All Books</button>
                </div>
                
                <div class="books-grid" id="myBooksGrid">
                    <!-- User's books will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Categories Section -->
        <section class="section bg-gray-50" id="categories">
            <div class="container">
                <div class="section-title">
                    <h2>Browse by Category</h2>
                    <p>Find books in your favorite categories from thousands of listings</p>
                </div>
                
                <div class="categories-grid" id="categoriesGrid">
                    <!-- Categories will be loaded here -->
                </div>
            </div>
        </section>

        <!-- Books Section -->
        <section class="section" id="books">
            <div class="container">
                <div class="section-title">
                    <h2>Recently Listed Books</h2>
                    <p>Discover amazing deals on pre-loved books from sellers near you</p>
                </div>
                
                <div class="books-grid" id="booksGrid">
                    <!-- Books will be loaded here -->
                </div>
            </div>
        </section>

        <!-- How it Works -->
        <section class="section bg-gray-50" id="how">
            <div class="container">
                <div class="section-title">
                    <h2>How BookBazaar Works</h2>
                    <p>Simple steps to buy and sell old books in your city</p>
                </div>
                
                <div class="steps-grid">
                    <div class="step-card">
                        <div class="step-number">1</div>
                        <div class="step-icon">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <h3>List Your Book</h3>
                        <p>Take photos, set your price, add details. List your book in just 2 minutes.</p>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">2</div>
                        <div class="step-icon">
                            <i class="fas fa-bullhorn"></i>
                        </div>
                        <h3>Get Buyer Interest</h3>
                        <p>Buyers in your city will contact you directly via WhatsApp or phone call.</p>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">3</div>
                        <div class="step-icon">
                            <i class="fas fa-handshake"></i>
                        </div>
                        <h3>Meet & Sell</h3>
                        <p>Meet at a safe public place or arrange delivery. Get paid in cash or UPI.</p>
                    </div>
                    
                    <div class="step-card">
                        <div class="step-number">4</div>
                        <div class="step-icon">
                            <i class="fas fa-rupee-sign"></i>
                        </div>
                        <h3>Earn Money</h3>
                        <p>Sell your old books, earn extra cash, and clear up shelf space.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="main-footer">
            <div class="container">
                <div class="footer-grid">
                    <div class="footer-col">
                        <h3>BookBazaar</h3>
                        <p>India's most trusted marketplace for buying and selling old books. Connect with local buyers and sellers.</p>
                        <div class="social-links">
                            <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                            <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                            <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                            <a href="#" class="social-link"><i class="fab fa-whatsapp"></i></a>
                        </div>
                    </div>
                    
                    <div class="footer-col">
                        <h3>Quick Links</h3>
                        <ul>
                            <li><a href="#home">Home</a></li>
                            <li><a href="#books">Browse Books</a></li>
                            <li><a href="#mybooks">My Books</a></li>
                            <li><a href="#categories">Categories</a></li>
                            <li><a href="#how">How it Works</a></li>
                            <li><a href="#" id="logoutBtn">Logout</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-col">
                        <h3>Safety Tips</h3>
                        <ul>
                            <li><a href="#">Meet in Public Places</a></li>
                            <li><a href="#">Check Book Condition</a></li>
                            <li><a href="#">Verify Seller/Buyer</a></li>
                            <li><a href="#">Avoid Advance Payments</a></li>
                            <li><a href="#">Report Suspicious Activity</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-col">
                        <h3>Contact Us</h3>
                        <ul>
                            <li><i class="fas fa-envelope"></i> support@bookbazaar.com</li>
                            <li><i class="fas fa-phone"></i> +91 9876543210</li>
                            <li><i class="fas fa-map-marker-alt"></i> Available in 100+ Cities</li>
                            <li><i class="fas fa-clock"></i> Support: 9 AM - 9 PM</li>
                        </ul>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p>&copy; 2024 BookBazaar. All rights reserved. | Buy & Sell Old Books Locally</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Sell Book Modal -->
    <div class="modal" id="sellModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Sell Your Book</h2>
                <button class="close-modal" id="closeSellModal">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Sell form will be loaded here -->
            </div>
        </div>
    </div>

    <!-- WhatsApp Chat Modal -->
    <div class="modal" id="whatsappModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Contact Seller via WhatsApp</h2>
                <button class="close-modal" id="closeWhatsAppModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="whatsappModalContent">
                    <!-- WhatsApp instructions will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div class="modal" id="confirmModal">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h2 id="confirmModalTitle">Confirm Action</h2>
                <button class="close-modal" id="closeConfirmModal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirmModalMessage">Are you sure you want to perform this action?</p>
                <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                    <button class="btn btn-outline" id="cancelConfirmBtn">Cancel</button>
                    <button class="btn btn-danger" id="confirmActionBtn">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ====== FIREBASE CONFIGURATION ======
        const firebaseConfig = {
            apiKey: "AIzaSyA8tqe5Mw9_gcrALO12LhJf3LUb65gxTVU",
            authDomain: "kitabkonnekt.firebaseapp.com",
            databaseURL: "https://kitabkonnekt-default-rtdb.firebaseio.com",
            projectId: "kitabkonnekt",
            storageBucket: "kitabkonnekt.firebasestorage.app",
            messagingSenderId: "566300666783",
            appId: "1:566300666783:web:eb7a32a65f80ed27096baa",
            measurementId: "G-FKB2K3XE53"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();
        const analytics = firebase.analytics();

        // ====== DATA ======
        let currentUser = null;
        let userListings = [];
        let soldBooks = [];
        let allBooks = [];

        const sampleBooks = [
            {
                id: 1,
                title: "Harry Potter and the Chamber of Secrets",
                author: "J.K. Rowling",
                category: "novels",
                condition: "good",
                price: 250,
                originalPrice: 699,
                location: "Delhi",
                sellerName: "Amit Sharma",
                sellerEmail: "amit@example.com",
                sellerPhone: "9876543210",
                sellerInitials: "AS",
                description: "Good condition, no torn pages, slight cover wear",
                date: "2 hours ago",
                badge: "Bestseller",
                userId: "demo1",
                status: "active"
            },
            {
                id: 2,
                title: "NCERT Physics Class 12",
                author: "NCERT",
                category: "academic",
                condition: "fair",
                price: 150,
                originalPrice: 300,
                location: "Mumbai",
                sellerName: "Priya Patel",
                sellerEmail: "priya@example.com",
                sellerPhone: "9876543211",
                sellerInitials: "PP",
                description: "Some highlights, all pages intact",
                date: "5 hours ago",
                badge: "Textbook",
                userId: "demo2",
                status: "active"
            },
            {
                id: 3,
                title: "Rich Dad Poor Dad",
                author: "Robert Kiyosaki",
                category: "business",
                condition: "like-new",
                price: 300,
                originalPrice: 499,
                location: "Bangalore",
                sellerName: "Rajesh Kumar",
                sellerEmail: "rajesh@example.com",
                sellerPhone: "9876543212",
                sellerInitials: "RK",
                description: "Like new, read only once",
                date: "1 day ago",
                badge: "Business",
                userId: "demo3",
                status: "active"
            }
        ];

        const categories = [
            { id: "novels", name: "Novels & Fiction", icon: "fas fa-book-reader", description: "Fiction, Literature, Novels" },
            { id: "academic", name: "Academic Textbooks", icon: "fas fa-graduation-cap", description: "School, College, University" },
            { id: "competitive", name: "Competitive Exams", icon: "fas fa-file-alt", description: "UPSC, SSC, Banking, CAT" },
            { id: "children", name: "Children Books", icon: "fas fa-child", description: "Kids, Story Books, Comics" },
            { id: "business", name: "Business & Finance", icon: "fas fa-chart-line", description: "Finance, Investing, Management" },
            { id: "self-help", name: "Self-Help", icon: "fas fa-hands-helping", description: "Motivation, Psychology, Growth" }
        ];

        // ====== DOM ELEMENTS ======
        const authModal = document.getElementById('authModal');
        const mainWebsite = document.getElementById('mainWebsite');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const forgotPasswordForm = document.getElementById('forgotPasswordForm');
        const authTabs = document.querySelectorAll('.auth-tab');
        const authLinks = document.querySelectorAll('.auth-link');
        const logoutBtn = document.getElementById('logoutBtn');
        const userMenu = document.getElementById('userMenu');
        const userAvatar = document.getElementById('userAvatar');
        const userName = document.getElementById('userName');
        const userEmail = document.getElementById('userEmail');
        const sellNowBtn = document.getElementById('sellNowBtn');
        const addNewBookBtn = document.getElementById('addNewBookBtn');
        const sellModal = document.getElementById('sellModal');
        const closeSellModal = document.getElementById('closeSellModal');
        const whatsappModal = document.getElementById('whatsappModal');
        const closeWhatsAppModal = document.getElementById('closeWhatsAppModal');
        const confirmModal = document.getElementById('confirmModal');
        const closeConfirmModal = document.getElementById('closeConfirmModal');
        const cancelConfirmBtn = document.getElementById('cancelConfirmBtn');
        const confirmActionBtn = document.getElementById('confirmActionBtn');
        const categoriesGrid = document.getElementById('categoriesGrid');
        const booksGrid = document.getElementById('booksGrid');
        const myBooksGrid = document.getElementById('myBooksGrid');
        const myBooksTabs = document.querySelectorAll('.books-tab');
        const totalBooksEl = document.getElementById('totalBooks');
        const activeUsersEl = document.getElementById('activeUsers');
        const citiesEl = document.getElementById('cities');
        const menuToggle = document.getElementById('menuToggle');
        const navContainer = document.getElementById('navContainer');
        const forgotPasswordLink = document.getElementById('forgotPasswordLink');
        const resetPasswordBtn = document.getElementById('resetPasswordBtn');

        // Variables for confirmation modal
        let currentConfirmAction = null;
        let currentBookId = null;

        // ====== FIREBASE AUTH FUNCTIONS ======
        function initFirebaseAuth() {
            // Listen for auth state changes
            auth.onAuthStateChanged((user) => {
                if (user) {
                    // User is signed in
                    currentUser = {
                        uid: user.uid,
                        email: user.email,
                        name: user.displayName || 'User',
                        phone: user.phoneNumber || '',
                        city: '',
                        initials: (user.displayName || 'U').split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2)
                    };
                    
                    // Fetch additional user data from database
                    fetchUserData(user.uid).then(() => {
                        updateUserProfile();
                        loadCategories();
                        loadAllBooksFromFirebase();
                        loadMyBooks('active');
                        updateStats();
                        
                        authModal.classList.add('hidden');
                        mainWebsite.classList.add('show');
                        
                        // Scroll to top after login
                        window.scrollTo({ top: 0, behavior: 'instant' });
                    });
                    
                } else {
                    // User is signed out
                    currentUser = null;
                    authModal.classList.remove('hidden');
                    mainWebsite.classList.remove('show');
                    // Show login tab by default
                    switchAuthTab('login');
                }
            });
        }

        async function fetchUserData(uid) {
            try {
                const snapshot = await database.ref('users/' + uid).once('value');
                const userData = snapshot.val();
                
                if (userData) {
                    currentUser = { ...currentUser, ...userData };
                } else {
                    // Create user data if doesn't exist
                    await saveUserToDatabase();
                }
                
                // Fetch user's listings
                const listingsSnapshot = await database.ref('listings/' + uid).once('value');
                const listingsData = listingsSnapshot.val();
                userListings = listingsData ? Object.values(listingsData) : [];
                
                // Fetch sold books
                const soldSnapshot = await database.ref('sold_books/' + uid).once('value');
                const soldData = soldSnapshot.val();
                soldBooks = soldData ? Object.values(soldData) : [];
                
            } catch (error) {
                console.error('Error fetching user data:', error);
                showNotification('Error loading user data', 'error');
            }
        }

        async function saveUserToDatabase() {
            try {
                await database.ref('users/' + currentUser.uid).set({
                    name: currentUser.name,
                    email: currentUser.email,
                    phone: currentUser.phone || '',
                    city: currentUser.city || '',
                    initials: currentUser.initials,
                    joinedDate: new Date().toISOString(),
                    lastLogin: new Date().toISOString()
                });
            } catch (error) {
                console.error('Error saving user data:', error);
            }
        }

        // ====== AUTH FUNCTIONS ======
        async function handleLogin(email, password) {
            try {
                const loginBtn = document.getElementById('loginBtn');
                const originalText = loginBtn.innerHTML;
                loginBtn.classList.add('loading');
                loginBtn.disabled = true;
                
                const userCredential = await auth.signInWithEmailAndPassword(email, password);
                
                // Update last login time
                await database.ref('users/' + userCredential.user.uid).update({
                    lastLogin: new Date().toISOString()
                });
                
                showNotification('Login successful!', 'success');
                
            } catch (error) {
                console.error('Login error:', error);
                let errorMessage = 'Login failed. ';
                
                switch(error.code) {
                    case 'auth/user-not-found':
                        errorMessage += 'No user found with this email.';
                        break;
                    case 'auth/wrong-password':
                        errorMessage += 'Incorrect password.';
                        break;
                    case 'auth/invalid-email':
                        errorMessage += 'Invalid email address.';
                        break;
                    case 'auth/user-disabled':
                        errorMessage += 'This account has been disabled.';
                        break;
                    case 'auth/too-many-requests':
                        errorMessage += 'Too many failed attempts. Please try again later.';
                        break;
                    default:
                        errorMessage += error.message;
                }
                
                showNotification(errorMessage, 'error');
            } finally {
                const loginBtn = document.getElementById('loginBtn');
                if (loginBtn) {
                    loginBtn.classList.remove('loading');
                    loginBtn.disabled = false;
                    loginBtn.innerHTML = originalText;
                }
            }
        }

        async function handleSignup(name, email, phone, city, password) {
            try {
                const signupBtn = document.getElementById('signupBtn');
                const originalText = signupBtn.innerHTML;
                signupBtn.classList.add('loading');
                signupBtn.disabled = true;
                
                // Create user with email and password
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                // Update user profile
                await user.updateProfile({
                    displayName: name
                });
                
                // Set current user
                currentUser = {
                    uid: user.uid,
                    email: user.email,
                    name: name,
                    phone: phone,
                    city: city,
                    initials: name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2)
                };
                
                // Save user data to database
                await saveUserToDatabase();
                
                showNotification('Account created successfully!', 'success');
                switchAuthTab('login');
                
            } catch (error) {
                console.error('Signup error:', error);
                let errorMessage = 'Signup failed. ';
                
                switch(error.code) {
                    case 'auth/email-already-in-use':
                        errorMessage += 'Email already in use.';
                        break;
                    case 'auth/invalid-email':
                        errorMessage += 'Invalid email address.';
                        break;
                    case 'auth/operation-not-allowed':
                        errorMessage += 'Email/password accounts are not enabled.';
                        break;
                    case 'auth/weak-password':
                        errorMessage += 'Password is too weak.';
                        break;
                    default:
                        errorMessage += error.message;
                }
                
                showNotification(errorMessage, 'error');
            } finally {
                const signupBtn = document.getElementById('signupBtn');
                if (signupBtn) {
                    signupBtn.classList.remove('loading');
                    signupBtn.disabled = false;
                    signupBtn.innerHTML = originalText;
                }
            }
        }

        async function handleForgotPassword(email) {
            try {
                const resetBtn = document.getElementById('resetPasswordBtn');
                const originalText = resetBtn.innerHTML;
                resetBtn.classList.add('loading');
                resetBtn.disabled = true;
                
                await auth.sendPasswordResetEmail(email);
                showNotification('Password reset email sent! Check your inbox.', 'success');
                
                // Switch back to login form
                setTimeout(() => switchAuthTab('login'), 2000);
                
            } catch (error) {
                console.error('Password reset error:', error);
                let errorMessage = 'Failed to send reset email. ';
                
                switch(error.code) {
                    case 'auth/user-not-found':
                        errorMessage += 'No user found with this email.';
                        break;
                    case 'auth/invalid-email':
                        errorMessage += 'Invalid email address.';
                        break;
                    default:
                        errorMessage += error.message;
                }
                
                showNotification(errorMessage, 'error');
            } finally {
                const resetBtn = document.getElementById('resetPasswordBtn');
                if (resetBtn) {
                    resetBtn.classList.remove('loading');
                    resetBtn.disabled = false;
                    resetBtn.innerHTML = originalText;
                }
            }
        }

        async function handleLogout() {
            try {
                await auth.signOut();
                showNotification('Logged out successfully', 'info');
            } catch (error) {
                console.error('Logout error:', error);
                showNotification('Logout failed', 'error');
            }
        }

        // ====== INITIALIZATION ======
        document.addEventListener('DOMContentLoaded', function() {
            initFirebaseAuth();
            setupEventListeners();
            setupSmoothScroll();
        });

        function setupEventListeners() {
            // Mobile menu toggle
            menuToggle.addEventListener('click', () => {
                navContainer.classList.toggle('show');
            });

            // Auth tabs
            authTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.dataset.tab;
                    switchAuthTab(tabName);
                });
            });

            // Switch between login/signup
            authLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const target = link.dataset.switch;
                    switchAuthTab(target);
                });
            });

            // Password toggle
            document.querySelectorAll('.password-toggle').forEach(toggle => {
                toggle.addEventListener('click', () => {
                    const targetId = toggle.dataset.target;
                    const input = document.getElementById(targetId);
                    const icon = toggle.querySelector('i');
                    
                    if (input.type === 'password') {
                        input.type = 'text';
                        icon.classList.remove('fa-eye');
                        icon.classList.add('fa-eye-slash');
                    } else {
                        input.type = 'password';
                        icon.classList.remove('fa-eye-slash');
                        icon.classList.add('fa-eye');
                    }
                });
            });

            // Login form
            loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                handleLogin(email, password);
            });
            
            // Signup form
            signupForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const name = document.getElementById('signupName').value;
                const email = document.getElementById('signupEmail').value;
                const phone = document.getElementById('signupPhone').value;
                const city = document.getElementById('signupCity').value;
                const password = document.getElementById('signupPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                const agreeTerms = document.getElementById('agreeTerms').checked;
                
                // Validation
                if (!agreeTerms) {
                    showNotification('Please agree to the Terms & Conditions', 'error');
                    return;
                }
                
                if (password !== confirmPassword) {
                    showNotification('Passwords do not match', 'error');
                    return;
                }
                
                if (password.length < 6) {
                    showNotification('Password must be at least 6 characters', 'error');
                    return;
                }
                
                handleSignup(name, email, phone, city, password);
            });
            
            // Forgot password link
            if (forgotPasswordLink) {
                forgotPasswordLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    switchAuthTab('forgot');
                });
            }
            
            // Forgot password form
            if (forgotPasswordForm) {
                forgotPasswordForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const email = document.getElementById('forgotEmail').value;
                    handleForgotPassword(email);
                });
            }
            
            // Logout
            logoutBtn.addEventListener('click', handleLogout);

            // User menu
            userMenu.addEventListener('click', () => {
                if (confirm('Do you want to logout?')) {
                    handleLogout();
                }
            });

            // Sell book buttons
            sellNowBtn.addEventListener('click', openSellModal);
            addNewBookBtn.addEventListener('click', openSellModal);

            // My Books tabs
            myBooksTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs
                    myBooksTabs.forEach(t => t.classList.remove('active'));
                    // Add active class to clicked tab
                    tab.classList.add('active');
                    
                    // Load books for selected tab
                    const tabName = tab.dataset.tab;
                    loadMyBooks(tabName);
                });
            });

            // Close modals
            closeSellModal.addEventListener('click', () => {
                sellModal.classList.remove('show');
            });

            closeWhatsAppModal.addEventListener('click', () => {
                whatsappModal.classList.remove('show');
            });

            closeConfirmModal.addEventListener('click', () => {
                confirmModal.classList.remove('show');
            });

            cancelConfirmBtn.addEventListener('click', () => {
                confirmModal.classList.remove('show');
            });

            // Confirm action
            confirmActionBtn.addEventListener('click', () => {
                if (currentConfirmAction === 'markSold' && currentBookId) {
                    markBookAsSold(currentBookId);
                } else if (currentConfirmAction === 'delete' && currentBookId) {
                    deleteBook(currentBookId);
                }
                confirmModal.classList.remove('show');
            });

            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === sellModal) {
                    sellModal.classList.remove('show');
                }
                if (e.target === whatsappModal) {
                    whatsappModal.classList.remove('show');
                }
                if (e.target === confirmModal) {
                    confirmModal.classList.remove('show');
                }
                if (!navContainer.contains(e.target) && !menuToggle.contains(e.target)) {
                    navContainer.classList.remove('show');
                }
            });

            // Search functionality
            const searchInput = document.querySelector('.search-input');
            const searchBtn = document.querySelector('.hero-search button');
            
            if (searchBtn) {
                searchBtn.addEventListener('click', () => performSearch(searchInput.value));
            }
            if (searchInput) {
                searchInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') performSearch(searchInput.value);
                });
            }

            // Navigation menu click events
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    const targetElement = document.getElementById(targetId);
                    
                    if (targetElement) {
                        // Remove active class from all links
                        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                        // Add active class to clicked link
                        this.classList.add('active');
                        
                        // Close mobile menu
                        navContainer.classList.remove('show');
                        
                        // Smooth scroll to section
                        targetElement.scrollIntoView({ 
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Logo click to go to home
            document.querySelector('.brand').addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                document.querySelector('[href="#home"]').classList.add('active');
                document.getElementById('home').scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
            });
        }

        // Setup smooth scroll for navigation
        function setupSmoothScroll() {
            // Handle hash changes
            window.addEventListener('hashchange', function() {
                const hash = window.location.hash.substring(1);
                if (hash) {
                    const element = document.getElementById(hash);
                    if (element) {
                        element.scrollIntoView({ behavior: 'smooth' });
                    }
                }
            });
        }

        // ====== AUTH TAB SWITCHING ======
        function switchAuthTab(tabName) {
            // Update active tab
            authTabs.forEach(tab => {
                tab.style.display = tabName === 'forgot' ? 'none' : 'flex';
                tab.classList.toggle('active', tab.dataset.tab === tabName);
            });
            
            // Show active form
            loginForm.classList.toggle('active', tabName === 'login');
            signupForm.classList.toggle('active', tabName === 'signup');
            
            if (forgotPasswordForm) {
                forgotPasswordForm.classList.toggle('active', tabName === 'forgot');
            }
            
            // Adjust auth header padding for forgot password form
            const authHeader = document.querySelector('.auth-header');
            if (authHeader) {
                authHeader.style.padding = tabName === 'forgot' ? '2rem' : '2.5rem 2rem';
            }
        }

        function updateUserProfile() {
            if (currentUser) {
                userAvatar.textContent = currentUser.initials;
                userName.textContent = currentUser.name;
                userEmail.textContent = currentUser.email;
            }
        }

        // ====== UI FUNCTIONS ======
        function loadCategories() {
            categoriesGrid.innerHTML = '';
            
            categories.forEach(category => {
                const categoryCard = document.createElement('div');
                categoryCard.className = 'category-card';
                categoryCard.innerHTML = `
                    <div class="category-icon">
                        <i class="${category.icon}"></i>
                    </div>
                    <h3>${category.name}</h3>
                    <p>${category.description}</p>
                `;
                
                categoryCard.addEventListener('click', () => {
                    // Update active nav
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    document.querySelector('[href="#books"]').classList.add('active');
                    filterBooksByCategory(category.id);
                });
                
                categoriesGrid.appendChild(categoryCard);
            });
        }

        async function loadAllBooksFromFirebase() {
            try {
                const snapshot = await database.ref('listings').once('value');
                const listings = snapshot.val();
                
                if (listings) {
                    // Convert Firebase object to array
                    const firebaseBooks = [];
                    Object.values(listings).forEach(userListings => {
                        Object.values(userListings).forEach(book => {
                            if (book.status !== 'sold') {
                                firebaseBooks.push(book);
                            }
                        });
                    });
                    
                    // Combine with sample books
                    allBooks = [...sampleBooks, ...firebaseBooks];
                } else {
                    allBooks = [...sampleBooks];
                }
                
                loadBooks();
                
            } catch (error) {
                console.error('Error loading books:', error);
                allBooks = [...sampleBooks];
                loadBooks();
            }
        }

        function loadBooks(books = allBooks) {
            booksGrid.innerHTML = '';
            
            if (books.length === 0) {
                booksGrid.innerHTML = `
                    <div class="text-center" style="grid-column: 1/-1; padding: 3rem;">
                        <div class="category-icon mb-4">
                            <i class="fas fa-book"></i>
                        </div>
                        <h3 class="mb-2">No Books Found</h3>
                        <p class="mb-4">Be the first to list a book in this category!</p>
                        <button class="btn btn-primary" id="sellFirstBook">
                            <i class="fas fa-plus"></i> Sell Your Book
                        </button>
                    </div>
                `;
                
                document.getElementById('sellFirstBook')?.addEventListener('click', openSellModal);
                return;
            }
            
            // Show only active books
            const activeBooks = books.filter(book => book.status !== 'sold');
            
            activeBooks.forEach(book => {
                const bookCard = createBookCard(book, 'browse');
                booksGrid.appendChild(bookCard);
            });
        }

        function loadMyBooks(filter = 'active') {
            myBooksGrid.innerHTML = '';
            
            // Get user's books
            const userBooks = [...userListings];
            
            let filteredBooks = [];
            
            switch(filter) {
                case 'active':
                    filteredBooks = userBooks.filter(book => book.status !== 'sold');
                    break;
                case 'sold':
                    filteredBooks = userBooks.filter(book => book.status === 'sold');
                    break;
                case 'all':
                    filteredBooks = userBooks;
                    break;
            }
            
            if (filteredBooks.length === 0) {
                myBooksGrid.innerHTML = `
                    <div class="no-books-message" style="grid-column: 1/-1;">
                        <i class="fas fa-book"></i>
                        <h3>No Books Found</h3>
                        <p>You haven't listed any books yet. Start selling your books now!</p>
                        <button class="btn btn-primary" id="sellFirstMyBook">
                            <i class="fas fa-plus"></i> Sell Your First Book
                        </button>
                    </div>
                `;
                
                document.getElementById('sellFirstMyBook')?.addEventListener('click', openSellModal);
                return;
            }
            
            filteredBooks.forEach(book => {
                const bookCard = createBookCard(book, 'mybooks');
                myBooksGrid.appendChild(bookCard);
            });
        }

        function createBookCard(book, type = 'browse') {
            const card = document.createElement('div');
            card.className = 'book-card';
            card.dataset.id = book.id;
            
            const discount = book.originalPrice ? 
                Math.round((1 - book.price / book.originalPrice) * 100) : 0;
            
            const conditionColors = {
                'like-new': '#10B981',
                'good': '#3B82F6',
                'fair': '#F59E0B',
                'poor': '#EF4444'
            };
            
            const isSold = book.status === 'sold';
            
            card.innerHTML = `
                <div class="book-image">
                    ${book.badge ? `<div class="book-badge ${isSold ? 'sold' : ''}">${isSold ? 'SOLD' : book.badge}</div>` : ''}
                    ${isSold ? '<div class="book-badge sold" style="right: 1rem; left: auto;">SOLD</div>' : ''}
                    <i class="fas fa-book-open"></i>
                </div>
                <div class="book-content">
                    <h3 class="book-title">${book.title}</h3>
                    <p class="book-author">${book.author}</p>
                    
                    <div class="book-meta">
                        <div class="book-location">
                            <i class="fas fa-map-marker-alt"></i> ${book.location}
                        </div>
                        <div class="book-condition" style="background: ${conditionColors[book.condition] || '#6B7280'}20; color: ${conditionColors[book.condition] || '#6B7280'}">
                            ${book.condition.replace('-', ' ').toUpperCase()}
                        </div>
                    </div>
                    
                    <div class="book-price">
                        <div class="current-price">${book.price}</div>
                        ${book.originalPrice ? `
                            <div class="original-price">${book.originalPrice}</div>
                            <div class="discount">${discount}% OFF</div>
                        ` : ''}
                    </div>
                    
                    <div class="book-seller">
                        <div class="seller-avatar">${book.sellerInitials}</div>
                        <div class="seller-info">
                            <h4>${book.sellerName}</h4>
                            <p>Listed ${book.date}</p>
                        </div>
                    </div>
                    
                    <div class="book-actions">
                        ${type === 'browse' ? `
                            <button class="btn-contact" data-id="${book.id}">
                                <i class="fab fa-whatsapp"></i> Contact Seller
                            </button>
                        ` : `
                            ${!isSold ? `
                                <button class="btn-sold" data-id="${book.id}">
                                    <i class="fas fa-check-circle"></i> Mark as Sold
                                </button>
                            ` : ''}
                            <button class="btn-delete" data-id="${book.id}">
                                <i class="fas fa-trash"></i> Delete Listing
                            </button>
                        `}
                    </div>
                </div>
            `;
            
            if (type === 'browse') {
                // Add event listener to contact button
                const contactBtn = card.querySelector('.btn-contact');
                contactBtn.addEventListener('click', () => {
                    if (!currentUser) {
                        showNotification('Please login to contact seller', 'error');
                        return;
                    }
                    openWhatsAppChat(book);
                });
            } else {
                // Add event listeners for my books actions
                if (!isSold) {
                    const soldBtn = card.querySelector('.btn-sold');
                    soldBtn.addEventListener('click', () => {
                        showConfirmModal('markSold', book.id, 'Mark this book as sold?', 'This will remove the book from active listings.');
                    });
                }
                
                const deleteBtn = card.querySelector('.btn-delete');
                deleteBtn.addEventListener('click', () => {
                    showConfirmModal('delete', book.id, 'Delete this listing?', 'This action cannot be undone.');
                });
            }
            
            return card;
        }

        function filterBooksByCategory(categoryId) {
            const filteredBooks = allBooks.filter(book => book.category === categoryId && book.status !== 'sold');
            loadBooks(filteredBooks);
            
            // Scroll to books section
            document.getElementById('books').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }

        function performSearch(query) {
            if (!query.trim()) {
                loadBooks(allBooks);
                return;
            }
            
            const filteredBooks = allBooks.filter(book => 
                (book.title.toLowerCase().includes(query.toLowerCase()) ||
                book.author.toLowerCase().includes(query.toLowerCase()) ||
                book.category.toLowerCase().includes(query.toLowerCase()) ||
                book.location.toLowerCase().includes(query.toLowerCase())) &&
                book.status !== 'sold'
            );
            
            loadBooks(filteredBooks);
            
            // Update nav active state
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            document.querySelector('[href="#books"]').classList.add('active');
            
            // Scroll to results
            document.getElementById('books').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }

        async function updateStats() {
            try {
                // Fetch all listings from database
                const snapshot = await database.ref('listings').once('value');
                const allListings = snapshot.val();
                
                // Count active listings
                let activeBooksCount = 0;
                if (allListings) {
                    Object.values(allListings).forEach(userListings => {
                        Object.values(userListings).forEach(book => {
                            if (book.status !== 'sold') {
                                activeBooksCount++;
                            }
                        });
                    });
                }
                
                // Add sample books count
                activeBooksCount += sampleBooks.filter(book => book.status !== 'sold').length;
                
                totalBooksEl.textContent = activeBooksCount + '+';
                
                // Get unique cities from listings
                const cities = new Set();
                if (allListings) {
                    Object.values(allListings).forEach(userListings => {
                        Object.values(userListings).forEach(book => {
                            if (book.city) cities.add(book.city);
                        });
                    });
                }
                
                // Add cities from sample books
                sampleBooks.forEach(book => {
                    if (book.location) cities.add(book.location);
                });
                
                citiesEl.textContent = cities.size + '+';
                
                // For active users, we can count users in the database
                const usersSnapshot = await database.ref('users').once('value');
                const usersData = usersSnapshot.val();
                const userCount = usersData ? Object.keys(usersData).length : 0;
                activeUsersEl.textContent = userCount + '+';
                
            } catch (error) {
                console.error('Error updating stats:', error);
                // Fallback to local data
                const activeBooksCount = allBooks.filter(book => book.status !== 'sold').length;
                totalBooksEl.textContent = activeBooksCount + '+';
                
                const uniqueCities = [...new Set(allBooks.map(book => book.location))];
                citiesEl.textContent = uniqueCities.length + '+';
                
                activeUsersEl.textContent = '5,000+'; // Default fallback
            }
        }

        // ====== BOOK MANAGEMENT FUNCTIONS ======
        async function saveBookToListings(bookData) {
            try {
                const bookId = bookData.id || Date.now().toString();
                await database.ref('listings/' + currentUser.uid + '/' + bookId).set(bookData);
                
                // Update local listings
                const index = userListings.findIndex(b => b.id === bookId);
                if (index !== -1) {
                    userListings[index] = bookData;
                } else {
                    userListings.push(bookData);
                }
                
                return true;
            } catch (error) {
                console.error('Error saving book:', error);
                showNotification('Failed to save book listing', 'error');
                return false;
            }
        }

        async function markBookAsSold(bookId) {
            try {
                // Get book data
                const bookRef = database.ref('listings/' + currentUser.uid + '/' + bookId);
                const snapshot = await bookRef.once('value');
                const bookData = snapshot.val();
                
                if (bookData) {
                    // Mark as sold
                    bookData.status = 'sold';
                    bookData.soldDate = new Date().toISOString();
                    
                    // Move to sold books
                    await database.ref('sold_books/' + currentUser.uid + '/' + bookId).set(bookData);
                    
                    // Remove from active listings
                    await bookRef.remove();
                    
                    // Update local data
                    userListings = userListings.filter(book => book.id !== bookId);
                    soldBooks.push(bookData);
                    
                    // Update allBooks array
                    const allBooksIndex = allBooks.findIndex(book => book.id === bookId);
                    if (allBooksIndex !== -1) {
                        allBooks[allBooksIndex].status = 'sold';
                    }
                    
                    // Update UI
                    loadBooks();
                    loadMyBooks('active');
                    updateStats();
                    
                    showNotification('Book marked as sold successfully!', 'success');
                }
            } catch (error) {
                console.error('Error marking book as sold:', error);
                showNotification('Failed to update book status', 'error');
            }
        }

        async function deleteBook(bookId) {
            try {
                // Remove from database
                await database.ref('listings/' + currentUser.uid + '/' + bookId).remove();
                
                // Update local data
                userListings = userListings.filter(book => book.id !== bookId);
                
                // Update allBooks array
                const allBooksIndex = allBooks.findIndex(book => book.id === bookId);
                if (allBooksIndex !== -1) {
                    allBooks.splice(allBooksIndex, 1);
                }
                
                // Update UI
                loadBooks();
                loadMyBooks('active');
                updateStats();
                
                showNotification('Book deleted successfully!', 'success');
            } catch (error) {
                console.error('Error deleting book:', error);
                showNotification('Failed to delete book', 'error');
            }
        }

        // ====== MODAL FUNCTIONS ======
        function showConfirmModal(action, bookId, title, message) {
            currentConfirmAction = action;
            currentBookId = bookId;
            
            document.getElementById('confirmModalTitle').textContent = title;
            document.getElementById('confirmModalMessage').textContent = message;
            
            confirmModal.classList.add('show');
        }

        function openSellModal() {
            if (!currentUser) {
                showNotification('Please login to sell books', 'error');
                return;
            }
            
            const modalBody = document.querySelector('.modal-body');
            modalBody.innerHTML = `
                <form id="sellBookForm">
                    <div class="form-group">
                        <label for="sellTitle" class="form-label">Book Title *</label>
                        <input type="text" id="sellTitle" class="form-control" placeholder="e.g., Harry Potter and the Chamber of Secrets" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="sellAuthor" class="form-label">Author Name *</label>
                        <input type="text" id="sellAuthor" class="form-control" placeholder="e.g., J.K. Rowling" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="sellCategory" class="form-label">Category *</label>
                        <select id="sellCategory" class="form-control" required>
                            <option value="">Select Category</option>
                            <option value="novels">Novels & Fiction</option>
                            <option value="academic">Academic Textbooks</option>
                            <option value="competitive">Competitive Exams</option>
                            <option value="children">Children Books</option>
                            <option value="business">Business & Finance</option>
                            <option value="self-help">Self-Help</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="sellCondition" class="form-label">Book Condition *</label>
                        <select id="sellCondition" class="form-control" required>
                            <option value="">Select Condition</option>
                            <option value="like-new">Like New</option>
                            <option value="good">Good</option>
                            <option value="fair">Fair</option>
                            <option value="poor">Poor</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="sellPrice" class="form-label">Selling Price () *</label>
                        <input type="number" id="sellPrice" class="form-control" placeholder="250" required min="10">
                    </div>
                    
                    <div class="form-group">
                        <label for="originalPrice" class="form-label">Original Price ()</label>
                        <input type="number" id="originalPrice" class="form-control" placeholder="699">
                    </div>
                    
                    <div class="form-group">
                        <label for="sellLocation" class="form-label">Your Location *</label>
                        <input type="text" id="sellLocation" class="form-control" placeholder="${currentUser.city}" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="sellDescription" class="form-label">Description</label>
                        <textarea id="sellDescription" class="form-control" rows="3" placeholder="Add details about the book condition, any highlights, etc..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Tips for Better Selling:</label>
                        <div style="background: #F0F9FF; padding: 1rem; border-radius: 0.5rem; font-size: 0.875rem;">
                            <p style="margin-bottom: 0.5rem;"><strong> Take Clear Photos:</strong> Show book cover, spine, and any damage</p>
                            <p style="margin-bottom: 0.5rem;"><strong> Be Honest:</strong> Mention all highlights, torn pages, or damage</p>
                            <p><strong> Use WhatsApp:</strong> Share photos with buyers to show actual condition</p>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-paper-plane"></i> List Book for Sale
                    </button>
                    
                    <p style="text-align: center; margin-top: 1rem; color: #6B7280; font-size: 0.875rem;">
                        Listing is FREE! Buyers will contact you directly on WhatsApp.
                    </p>
                </form>
            `;
            
            // Pre-fill location
            const locationInput = document.getElementById('sellLocation');
            if (locationInput) {
                locationInput.value = currentUser.city || '';
            }
            
            // Handle form submission
            const sellForm = modalBody.querySelector('#sellBookForm');
            if (sellForm) {
                sellForm.addEventListener('submit', handleSellForm);
            }
            
            sellModal.classList.add('show');
        }

        async function handleSellForm(e) {
            e.preventDefault();
            
            const bookData = {
                id: Date.now().toString(),
                title: document.getElementById('sellTitle').value,
                author: document.getElementById('sellAuthor').value,
                category: document.getElementById('sellCategory').value,
                condition: document.getElementById('sellCondition').value,
                price: parseInt(document.getElementById('sellPrice').value),
                originalPrice: document.getElementById('originalPrice').value ? 
                    parseInt(document.getElementById('originalPrice').value) : null,
                location: document.getElementById('sellLocation').value,
                sellerName: currentUser.name,
                sellerEmail: currentUser.email,
                sellerPhone: currentUser.phone,
                sellerInitials: currentUser.initials,
                description: document.getElementById('sellDescription').value || 'No description',
                date: 'Just now',
                badge: 'New',
                userId: currentUser.uid,
                status: 'active',
                city: currentUser.city
            };
            
            // Save to Firebase
            const saved = await saveBookToListings(bookData);
            
            if (saved) {
                // Update all books
                allBooks.push(bookData);
                
                // Close modal
                sellModal.classList.remove('show');
                
                // Scroll to my books section
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                document.querySelector('[href="#mybooks"]').classList.add('active');
                document.getElementById('mybooks').scrollIntoView({ 
                    behavior: 'smooth',
                    block: 'start'
                });
                
                showNotification('Book listed successfully! Buyers can now contact you on WhatsApp.', 'success');
            }
        }

        function openWhatsAppChat(book) {
            const modalContent = document.getElementById('whatsappModalContent');
            
            // Create WhatsApp message
            const message = `Hi ${book.sellerName}!%0A%0AI saw your book "${book.title}" on BookBazaar for ${book.price}.%0A%0A Book Details:%0A- Author: ${book.author}%0A- Condition: ${book.condition}%0A- Location: ${book.location}%0A%0AI'm interested in buying it. Could you please:%0A1. Share some photos of the actual book condition%0A2. Let me know your best price%0A3. Suggest a meeting place%0A%0AThanks!%0A- ${currentUser.name}`;
            
            const whatsappUrl = `https://wa.me/+91${book.sellerPhone}?text=${message}`;
            
            modalContent.innerHTML = `
                <div style="text-align: center;">
                    <div style="width: 80px; height: 80px; background: #25D366; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1.5rem;">
                        <i class="fab fa-whatsapp" style="font-size: 2.5rem; color: white;"></i>
                    </div>
                    
                    <h3 style="margin-bottom: 1rem;">Contact ${book.sellerName}</h3>
                    <p style="color: #6B7280; margin-bottom: 1.5rem;">Click the button below to open WhatsApp and start chatting directly with the seller.</p>
                    
                    <div style="background: #F3F4F6; padding: 1.5rem; border-radius: 0.75rem; margin-bottom: 1.5rem; text-align: left;">
                        <p style="margin-bottom: 0.5rem;"><strong> Phone:</strong> +91 ${book.sellerPhone}</p>
                        <p style="margin-bottom: 0.5rem;"><strong> Book:</strong> ${book.title}</p>
                        <p style="margin-bottom: 0.5rem;"><strong> Price:</strong> ${book.price}</p>
                        <p><strong> Location:</strong> ${book.location}</p>
                    </div>
                    
                    <div style="background: #FFFBEB; padding: 1rem; border-radius: 0.5rem; margin-bottom: 1.5rem; text-align: left;">
                        <p style="color: #92400E; margin-bottom: 0.5rem;"><strong> Tips for WhatsApp Chat:</strong></p>
                        <ul style="color: #92400E; padding-left: 1.5rem;">
                            <li>Ask for actual photos of the book</li>
                            <li>Negotiate price politely</li>
                            <li>Agree on meeting place (public location)</li>
                            <li>Check book condition before paying</li>
                        </ul>
                    </div>
                    
                    <a href="${whatsappUrl}" target="_blank" class="btn btn-primary" style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 1rem 2rem; font-size: 1.1rem; margin-bottom: 1rem;">
                        <i class="fab fa-whatsapp"></i> Open WhatsApp Chat
                    </a>
                    
                    <p style="color: #6B7280; font-size: 0.875rem;">Will open WhatsApp in a new tab. Make sure you have WhatsApp installed.</p>
                </div>
            `;
            
            whatsappModal.classList.add('show');
        }

        // ====== NOTIFICATION SYSTEM ======
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 
                                 type === 'error' ? 'exclamation-circle' : 
                                 type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            
            // Add styles for notification
            notification.style.cssText = `
                position: fixed;
                top: 1rem;
                right: 1rem;
                padding: 1rem 1.5rem;
                border-radius: 0.5rem;
                background: ${type === 'success' ? '#10B981' : 
                           type === 'error' ? '#EF4444' : 
                           type === 'warning' ? '#F59E0B' : '#3B82F6'};
                color: white;
                display: flex;
                align-items: center;
                gap: 0.75rem;
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
                z-index: 9999;
                animation: slideIn 0.3s ease;
            `;
            
            // Add animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>